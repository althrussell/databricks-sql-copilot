# Databricks connection — local development only
# Copy this file to .env.local and fill in your values.
#
# See docs/07_DEPLOYMENT.md for full details.

# Workspace URL (include https://)
DATABRICKS_HOST=https://YOUR_WORKSPACE.cloud.databricks.com

# Personal access token for local dev
DATABRICKS_TOKEN=dapiXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# SQL warehouse ID (last segment of HTTP path)
DATABRICKS_WAREHOUSE_ID=YOUR_WAREHOUSE_ID

# ── Lakebase persistence (optional, disabled by default) ──────────
# Set to "true" to enable Prisma/Lakebase for:
#   - AI rewrite cache (7-day TTL)
#   - Query actions (dismiss/watch/applied, 30-day TTL)
#   - Health snapshots for trend comparison (90-day TTL)
# The app works fully without it — you just lose state on restart.
ENABLE_LAKEBASE=false

# When deployed as a Databricks App with ENABLE_LAKEBASE=true,
# the database is auto-provisioned using the platform-injected service
# principal credentials. No DATABASE_URL or secret binding needed.
#
# For local dev with ENABLE_LAKEBASE=true, set DATABASE_URL:
# DATABASE_URL=postgresql://USER:PASSWORD@HOST/databricks_postgres?sslmode=require

# ── Insight source (optional) ────────────────────────────────────
# Controls where performance insights come from.
#   "builtin"      — Rule-based detection + AI triage (default)
#   "system_table" — system.query.performance_insights (future Databricks feature)
#   "hybrid"       — Merge both sources, system table takes priority
INSIGHT_SOURCE=builtin
